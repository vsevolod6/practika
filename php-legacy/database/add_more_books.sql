-- Добавляем больше тестовых книг (всего 25 книг)

INSERT INTO physical_books (inventory_number, title, author, year, location, status) VALUES
('LIB-2024-009', 'Властелин колец', 'Джон Р. Р. Толкин', 1954, 'Секция Ф, стеллаж 2', 'borrowed'),
('LIB-2024-010', 'Гордость и предубеждение', 'Джейн Остин', 1813, 'Секция Д, стеллаж 1', 'available'),
('LIB-2024-011', 'Сто лет одиночества', 'Габриэль Гарсиа Маркес', 1967, 'Секция И, стеллаж 4', 'available'),
('LIB-2024-012', 'Лолита', 'Владимир Набоков', 1955, 'Секция Е, стеллаж 2', 'available'),
('LIB-2024-013', 'Братья Карамазовы', 'Фёдор Достоевский', 1880, 'Секция Б, стеллаж 5', 'borrowed'),
('LIB-2024-014', 'Превращение', 'Франц Кафка', 1915, 'Секция К, стеллаж 1', 'available'),
('LIB-2024-015', 'Над пропастью во ржи', 'Джером Сэлинджер', 1951, 'Секция Г, стеллаж 3', 'available'),
('LIB-2024-016', 'Великий Гэтсби', 'Фрэнсис Скотт Фицджеральд', 1925, 'Секция А, стеллаж 4', 'available'),
('LIB-2024-017', 'О дивный новый мир', 'Олдос Хаксли', 1932, 'Секция В, стеллаж 2', 'available'),
('LIB-2024-018', '451 градус по Фаренгейту', 'Рэй Брэдбери', 1953, 'Секция Н, стеллаж 3', 'borrowed'),
('LIB-2024-019', 'Скотный двор', 'Джордж Оруэлл', 1945, 'Секция З, стеллаж 1', 'available'),
('LIB-2024-020', 'Повелитель мух', 'Уильям Голдинг', 1954, 'Секция Л, стеллаж 2', 'available'),
('LIB-2024-021', 'Убить пересмешника', 'Харпер Ли', 1960, 'Секция М, стеллаж 1', 'available'),
('LIB-2024-022', 'Дон Кихот', 'Мигель де Сервантес', 1605, 'Секция О, стеллаж 1', 'available'),
('LIB-2024-023', 'Франкенштейн', 'Мэри Шелли', 1818, 'Секция П, стеллаж 2', 'available'),
('LIB-2024-024', 'Портрет Дориана Грея', 'Оскар Уайльд', 1890, 'Секция Р, стеллаж 1', 'available'),
('LIB-2024-025', 'Моби Дик', 'Герман Мелвилл', 1851, 'Секция С, стеллаж 3', 'available');

-- Добавляем историю выдач
INSERT INTO physical_loans (book_id, reader_card, date_taken, date_returned) VALUES
(6, 'R-10004', '2024-11-20', '2024-12-05'),
(7, 'R-10005', '2024-12-01', NULL),
(9, 'R-10006', '2024-11-15', NULL),
(11, 'R-10007', '2024-11-25', '2024-12-10'),
(13, 'R-10008', '2024-12-03', NULL),
(16, 'R-10009', '2024-11-28', '2024-12-08'),
(18, 'R-10010', '2024-12-05', NULL);

-- Обновляем статусы книг на borrowed где есть активные выдачи
UPDATE physical_books SET status = 'borrowed' WHERE id IN (
    SELECT book_id FROM physical_loans WHERE date_returned IS NULL
);
